<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Vector Spatio-Temporal Data Structure for Data Analysis • cubble</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="A Vector Spatio-Temporal Data Structure for Data Analysis">
<meta property="og:description" content="A spatiotemperal data object in a relational data structure to separate the recording of time variant/ invariant variables.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">cubble</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1.0000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/cubble.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/0-import.html">0. Import data as a cubble</a>
    </li>
    <li>
      <a href="articles/1-cubble-design.html">1. Details on cubble design</a>
    </li>
    <li>
      <a href="articles/2-aggregation.html">2. Application: hierarchical data structure</a>
    </li>
    <li>
      <a href="articles/3-matching.html">3. Application: matching</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="cubble">Cubble<a class="anchor" aria-label="anchor" href="#cubble"></a>
</h1></div>
<!-- badges: start -->

<p>Cubble provides a new data structure to manipulate spatio-temporal vector data. It arranges variables into two forms: nested form and long form. The nested form shows each site in a row and time invariant variables as columns. The time varying variables are nested into a <code>ts</code> column. In the long form, each row is cross-identified by the site and time, time varying variables are presented, and time invariant variables are stored as an attribute. The two forms can be switched back and forth for manipulation on the spatial and temporal dimension of the data.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the released version of cubble from <a href="https://CRAN.R-project.org" class="external-link">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"cubble"</span><span class="op">)</span></code></pre></div>
<p>And the development version from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"huizezhang-sherry/cubble"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p><code><a href="reference/cubble-class.html">as_cubble()</a></code> creates a cubble in the nested form by supplying the spatial identifier, <code>key</code>, temporal identifier, <code>index</code>, and the spatial coordinates that defines the site, <code>coords</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">cubble</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="va">nested</span> <span class="op">&lt;-</span> <span class="va">climate_flat</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="reference/cubble-class.html">as_cubble</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">id</span>, index <span class="op">=</span> <span class="va">date</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">long</span>, <span class="va">lat</span><span class="op">)</span><span class="op">)</span>
<span class="va">nested</span>
<span class="co">#&gt; # cubble:   id [5]: nested form</span>
<span class="co">#&gt; # bbox:     [115.97, -32.94, 133.55, -12.42]- check gap on long and lat</span>
<span class="co">#&gt; # temporal: date [date], prcp [dbl], tmax [dbl], tmin [dbl]</span>
<span class="co">#&gt;   id            lat  long  elev name           wmo_id ts                </span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;list&gt;            </span>
<span class="co">#&gt; 1 ASN00009021 -31.9  116.  15.4 perth airport   94610 &lt;tibble [366 × 4]&gt;</span>
<span class="co">#&gt; 2 ASN00010311 -31.9  117. 179   york            94623 &lt;tibble [366 × 4]&gt;</span>
<span class="co">#&gt; 3 ASN00010614 -32.9  117. 338   narrogin        94627 &lt;tibble [366 × 4]&gt;</span>
<span class="co">#&gt; 4 ASN00014015 -12.4  131.  30.4 darwin airport  94120 &lt;tibble [366 × 4]&gt;</span>
<span class="co">#&gt; 5 ASN00015131 -17.6  134. 220   elliott         94236 &lt;tibble [366 × 4]&gt;</span></code></pre></div>
<p><code><a href="reference/stretch.html">stretch()</a></code> switches a cubble from the nested form to the long form. The long form cubble is for operations whose output is cross-identified by <code>key</code> and <code>index</code>, for example, filtering January records:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">long</span> <span class="op">&lt;-</span> <span class="va">nested</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="reference/stretch.html">stretch</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/month.html" class="external-link">month</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span>
<span class="va">long</span>
<span class="co">#&gt; # cubble:  date, id [5]: long form</span>
<span class="co">#&gt; # bbox:    [115.97, -32.94, 133.55, -12.42]- check gap on long and lat</span>
<span class="co">#&gt; # spatial: lat [dbl], long [dbl], elev [dbl], name [chr], wmo_id [dbl]</span>
<span class="co">#&gt;    id          date        prcp  tmax  tmin</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 ASN00009021 2020-01-01     0  31.9  15.3</span>
<span class="co">#&gt;  2 ASN00009021 2020-01-02     0  24.9  16.4</span>
<span class="co">#&gt;  3 ASN00009021 2020-01-03     6  23.2  13  </span>
<span class="co">#&gt;  4 ASN00009021 2020-01-04     0  28.4  12.4</span>
<span class="co">#&gt;  5 ASN00009021 2020-01-05     0  35.3  11.6</span>
<span class="co">#&gt;  6 ASN00009021 2020-01-06     0  34.8  13.1</span>
<span class="co">#&gt;  7 ASN00009021 2020-01-07     0  32.8  15.1</span>
<span class="co">#&gt;  8 ASN00009021 2020-01-08     0  30.4  17.4</span>
<span class="co">#&gt;  9 ASN00009021 2020-01-09     0  28.7  17.3</span>
<span class="co">#&gt; 10 ASN00009021 2020-01-10     0  32.6  15.8</span>
<span class="co">#&gt; # … with 145 more rows</span></code></pre></div>
<p><code><a href="reference/tamp.html">tamp()</a></code> switches the long cubble back to the nested cubble. The nested form is for operations whose output is only identified by the <code>key</code>, for example, mutating the average maximum temperature in January:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">long</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="reference/tamp.html">tamp</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>avg_max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">ts</span><span class="op">$</span><span class="va">tmax</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # cubble:   id [5]: nested form</span>
<span class="co">#&gt; # bbox:     [115.97, -32.94, 133.55, -12.42]- check gap on long and lat</span>
<span class="co">#&gt; # temporal: date [date], prcp [dbl], tmax [dbl], tmin [dbl]</span>
<span class="co">#&gt;   id            lat  long  elev name           wmo_id ts                avg_max</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;list&gt;              &lt;dbl&gt;</span>
<span class="co">#&gt; 1 ASN00009021 -31.9  116.  15.4 perth airport   94610 &lt;tibble [31 × 4]&gt;    31.6</span>
<span class="co">#&gt; 2 ASN00010311 -31.9  117. 179   york            94623 &lt;tibble [31 × 4]&gt;    34.6</span>
<span class="co">#&gt; 3 ASN00010614 -32.9  117. 338   narrogin        94627 &lt;tibble [31 × 4]&gt;    31.4</span>
<span class="co">#&gt; 4 ASN00014015 -12.4  131.  30.4 darwin airport  94120 &lt;tibble [31 × 4]&gt;    32.8</span>
<span class="co">#&gt; 5 ASN00015131 -17.6  134. 220   elliott         94236 &lt;tibble [31 × 4]&gt;    38.5</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing cubble</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>H. Sherry Zhang <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-7122-1463" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Dianne Cook <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-3813-7155" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Ursula Laa <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-0249-6439" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Nicolas Langrené <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-7601-4618" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Patricia Menéndez <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-0701-6315" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/huizezhang-sherry/cubble/actions" class="external-link"><img src="https://github.com/huizezhang-sherry/cubble/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by H. Sherry Zhang, Dianne Cook, Ursula Laa, Nicolas Langrené, Patricia Menéndez.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
