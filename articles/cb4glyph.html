<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>4. Making a glyph map • cubble</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="4. Making a glyph map">
<meta property="og:description" content="cubble">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cubble</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cb1class.html">1. The cubble class</a>
    </li>
    <li>
      <a href="../articles/cb2create.html">2. Creation and coercion</a>
    </li>
    <li>
      <a href="../articles/cb3tsibblesf.html">3. Compatibility with tsibble and sf</a>
    </li>
    <li>
      <a href="../articles/cb4glyph.html">4. Making a glyph map</a>
    </li>
    <li>
      <a href="../articles/cb5match.html">5. Matching different data sources</a>
    </li>
    <li>
      <a href="../articles/cb6interactive.html">6. Interactive graphics</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/huizezhang-sherry/cubble/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>4. Making a glyph map</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/huizezhang-sherry/cubble/blob/HEAD/vignettes/cb4glyph.Rmd" class="external-link"><code>vignettes/cb4glyph.Rmd</code></a></small>
      <div class="hidden name"><code>cb4glyph.Rmd</code></div>

    </div>

    
    
<p>Sometimes, we wish to communicate spatial and temporal information
collectively through visualisation. This can be achieved through several
graphical displays: one can make faceted maps across time, creating map
animations, or constructing interactive graphics to link between map and
time series plot. While interactive graphics will be the main focus of
vignette <a href="https://huizezhang-sherry.github.io/cubble/articles/cb6interactive.hml" class="external-link">6.
Interactive graphics</a>, this vignette will introduce a specific type
of spatio-temporal plot called glyph maps.</p>
<div class="section level2">
<h2 id="understanding-glyph-maps">Understanding glyph maps<a class="anchor" aria-label="anchor" href="#understanding-glyph-maps"></a>
</h2>
<p>The concept of glyph maps was initially proposed in <span class="citation">Wickham et al. (2012)</span>. The underlying idea is to
transform the temporal coordinates into spatial coordinates so that time
series plot can be displayed on the map. The diagram below illustrates
how the coordinate transformation:</p>
<p><img src="cluster-diagram/glyph-steps.png" width="100%"></p>
<p>Subplot (1) show the spatial location of a weather station and
subplot (2) displays its associated maximum temperature as time series
in 2020. In subplot (3), the temporal coordinates are transformed into
the spatial coordinates using linear algebra with a defined
<code>height</code> and <code>width</code> (Equation 1 in <span class="citation">Wickham et al. (2012)</span>), while the time series
glyph remains unchanged. The transformed time series can then be plotted
as a layer on the map in (4).</p>
<p>The package <code>GGally</code> initially implement the glyph map. It
uses <code>glyphs()</code> to calculate the axis transformation and then
uses <code><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html" class="external-link">geom_polygon()</a></code> to draw the map. In cubble, a ggproto
implementation <code><a href="../reference/glyph.html">geom_glyph()</a></code> performs the linear algebra
internally as data transformation . The <code><a href="../reference/glyph.html">geom_glyph()</a></code>
requires four aesthetics: <code>x_major</code>, <code>y_major</code>,
<code>x_minor</code>, and <code>y_minor</code>. The major axes are the
outer spatial coordinates and the minor axes are the inner/ temporal
coordinates:</p>
<pre><code><span><span class="va">data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/glyph.html">geom_glyph</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x_major <span class="op">=</span> <span class="va">...</span>, x_minor <span class="op">=</span> <span class="va">...</span>, y_major <span class="op">=</span> <span class="va">...</span>, y_minor <span class="op">=</span> <span class="va">...</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<p>Reference line and box can be added by separate geoms
(<code><a href="../reference/glyph.html">geom_glyph_box()</a></code>, <code><a href="../reference/glyph.html">geom_glyph_line()</a></code>) with the
same aesthetics (<code>x_major, x_minor, y_major, y_minor</code>). To
avoid repetition, you may want specify the aesthetics collectively
inside <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot()</a></code>:</p>
<pre><code><span><span class="va">data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x_major <span class="op">=</span> <span class="va">...</span>, x_minor <span class="op">=</span> <span class="va">...</span>, y_major <span class="op">=</span> <span class="va">...</span>, y_minor <span class="op">=</span> <span class="va">...</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/glyph.html">geom_glyph_box</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/glyph.html">geom_glyph_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/glyph.html">geom_glyph</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p>If you want add an undelying map which does not use the four glyph
map aesthetics, the argument <code>inherit.aes = FALSE</code> is
handy:</p>
<pre><code><span><span class="va">data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x_major <span class="op">=</span> <span class="va">...</span>, x_minor <span class="op">=</span> <span class="va">...</span>, y_major <span class="op">=</span> <span class="va">...</span>, y_minor <span class="op">=</span> <span class="va">...</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">MAP_DATA</span>, inherit.aes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="../reference/glyph.html">geom_glyph_box</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/glyph.html">geom_glyph_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/glyph.html">geom_glyph</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="monthly-average-maximum-temperature-in-victoria-australia">Monthly average maximum temperature in Victoria, Australia<a class="anchor" aria-label="anchor" href="#monthly-average-maximum-temperature-in-victoria-australia"></a>
</h2>
<p>Global Historical Climatology Network (GHCN) provides daily climate
measures from stations across the world. The dataset
<code>climate_aus</code> stores climate variables (precipitation,
maximum and minimum temperature) for 639 Australian stations in 2020.
This is a lot of stations to work with and we will start with a randomly
sample 80 stations (since not all the stations have the full year
record, we will only consider those that have 366 days for 2020):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">12345</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">tmax</span> <span class="op">&lt;-</span> <span class="va">climate_aus</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rowwise.html" class="external-link">rowwise</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ts</span><span class="op">)</span> <span class="op">==</span> <span class="fl">366</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">80</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># cubble:   key: id [80], index: date, nested form</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># spatial:  [114.6975, -43.6578, 153.6358, -11.1538], Missing CRS!</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># temporal: date [date], prcp [dbl], tmax [dbl], tmin [dbl]</span></span></span>
<span><span class="co">#&gt;    id           long   lat  elev name                        wmo_id ts      </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ASN00014829  131. -<span style="color: #BB0000;">18.3</span> 316.  lajamanu                     <span style="text-decoration: underline;">94</span>231 <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ASN00009131  115. -<span style="color: #BB0000;">30.3</span>   1.6 jurien bay                   <span style="text-decoration: underline;">95</span>600 <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ASN00024048  141. -<span style="color: #BB0000;">34.2</span>  31.5 renmark aero                 <span style="text-decoration: underline;">95</span>687 <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ASN00096071  146. -<span style="color: #BB0000;">42.1</span> 742   lake st clair national park  <span style="text-decoration: underline;">94</span>976 <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ASN00093053  147. -<span style="color: #BB0000;">42.0</span> 186   ross (the boulevards)        <span style="text-decoration: underline;">94</span>985 <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ASN00048027  146. -<span style="color: #BB0000;">31.5</span> 260   cobar mo                     <span style="text-decoration: underline;">94</span>711 <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ASN00023885  139. -<span style="color: #BB0000;">35.2</span>  55   noarlunga                    <span style="text-decoration: underline;">94</span>808 <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> ASN00010286  117. -<span style="color: #BB0000;">31.6</span> 217.  cunderdin airfield           <span style="text-decoration: underline;">95</span>625 <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ASN00009964  117. -<span style="color: #BB0000;">34.6</span> 250   rocky gully                  <span style="text-decoration: underline;">94</span>631 <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ASN00008051  115. -<span style="color: #BB0000;">28.8</span>  33   geraldton airport            <span style="text-decoration: underline;">94</span>403 <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 70 more rows</span></span></span></code></pre></div>
<p>Next, we would like to summarise the daily maximum temperature into
monthly. This can be done with the dplyr <code>group_by</code> +
<code>summarise</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">tmax</span> <span class="op">&lt;-</span> <span class="va">tmax</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/face.html">face_temporal</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span>month <span class="op">=</span> <span class="fu">tsibble</span><span class="fu">::</span><span class="fu"><a href="https://tsibble.tidyverts.org/reference/year-month.html" class="external-link">yearmonth</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>tmax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">tmax</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># cubble:   key: id [80], index: month, long form, groups: month [12]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># temporal: 2020 Jan -- 2020 Dec [1M], no gaps</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># spatial:  long [dbl], lat [dbl], elev [dbl], name [chr], wmo_id [dbl]</span></span></span>
<span><span class="co">#&gt;       month id           tmax</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;mth&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2020 Jan ASN00001018  33.5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2020 Jan ASN00002012  37.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2020 Jan ASN00003030  34.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2020 Jan ASN00003032  34.9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2020 Jan ASN00003057  33.5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2020 Jan ASN00004028  36.9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2020 Jan ASN00007600  37.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2020 Jan ASN00008051  31.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2020 Jan ASN00008137  35.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2020 Jan ASN00009037  34.3</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 950 more rows</span></span></span></code></pre></div>
<p>One requirement for the data to be plot with ggplot2 is that all the
variables mapped to aesthetics need to be store in the same table. In
cubble, you can move the spatial variables (e.g. <code>long</code> and
<code>lat</code>) into the temporal cubble with
<code><a href="../reference/unfold.html">unfold()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">tmax</span> <span class="op">&lt;-</span> <span class="va">tmax</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/unfold.html">unfold</a></span><span class="op">(</span><span class="va">long</span>, <span class="va">lat</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># cubble:   key: id [80], index: month, long form</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># temporal: 2020 Jan -- 2020 Dec [1M], no gaps</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># spatial:  long [dbl], lat [dbl], elev [dbl], name [chr], wmo_id [dbl]</span></span></span>
<span><span class="co">#&gt;       month id           tmax  long   lat</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;mth&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2020 Jan ASN00001018  33.5  126. -<span style="color: #BB0000;">16.4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2020 Jan ASN00002012  37.0  128. -<span style="color: #BB0000;">18.2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2020 Jan ASN00003030  34.0  122. -<span style="color: #BB0000;">18.7</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2020 Jan ASN00003032  34.9  124. -<span style="color: #BB0000;">17.4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2020 Jan ASN00003057  33.5  123. -<span style="color: #BB0000;">16.5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2020 Jan ASN00004028  36.9  120. -<span style="color: #BB0000;">20.1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2020 Jan ASN00007600  37.6  118. -<span style="color: #BB0000;">28.1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2020 Jan ASN00008051  31.0  115. -<span style="color: #BB0000;">28.8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2020 Jan ASN00008137  35.0  117. -<span style="color: #BB0000;">30.9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2020 Jan ASN00009037  34.3  116. -<span style="color: #BB0000;">30.3</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 950 more rows</span></span></span></code></pre></div>
<p>Using the glyph map syntax introduced in this vignette, we can then
create a glyph map:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmax</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x_major <span class="op">=</span> <span class="va">long</span>, y_major <span class="op">=</span> <span class="va">lat</span>, </span>
<span>             x_minor <span class="op">=</span> <span class="va">month</span>, y_minor <span class="op">=</span> <span class="va">tmax</span><span class="op">)</span><span class="op">)</span>  <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu">ozmaps</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/ozmaps/man/abs-data.html" class="external-link">abs_ste</a></span>, </span>
<span>          fill <span class="op">=</span> <span class="st">"grey95"</span>, color <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>          inherit.aes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/glyph.html">geom_glyph_box</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">1</span>, height <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/glyph.html">geom_glyph</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">1</span>,  height <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">110</span>, <span class="fl">155</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Longitude"</span>, y <span class="op">=</span> <span class="st">"Latitude"</span><span class="op">)</span></span></code></pre></div>
<p><img src="cb4glyph_files/figure-html/unnamed-chunk-6-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="reference">Reference<a class="anchor" aria-label="anchor" href="#reference"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Wickham2012-yr" class="csl-entry">
Wickham, Hadley, Heike Hofmann, Charlotte Wickham, and Dianne Cook.
2012. <span>“Glyph-Maps for Visually Exploring Temporal Patterns in
Climate Data and Models.”</span> <em>Environmetrics</em> 23 (5): 382–93.
<a href="https://doi.org/10.1002/env.2152" class="external-link">https://doi.org/10.1002/env.2152</a>.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by H. Sherry Zhang, Dianne Cook, Ursula Laa, Nicolas Langrené, Patricia Menéndez.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
